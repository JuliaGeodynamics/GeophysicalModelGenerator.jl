<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Projection · GeophysicalModelGenerator.jl</title><meta name="title" content="Projection · GeophysicalModelGenerator.jl"/><meta property="og:title" content="Projection · GeophysicalModelGenerator.jl"/><meta property="twitter:title" content="Projection · GeophysicalModelGenerator.jl"/><meta name="description" content="Documentation for GeophysicalModelGenerator.jl."/><meta property="og:description" content="Documentation for GeophysicalModelGenerator.jl."/><meta property="twitter:description" content="Documentation for GeophysicalModelGenerator.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">GeophysicalModelGenerator.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/">Overview</a></li><li><a class="tocitem" href="../tutorial_load3DSeismicData/">1 - 3D seismic tomography from ASCII</a></li><li><a class="tocitem" href="../tutorial_loadregular3DSeismicData_netCDF/">2 - 3D seismic tomography from netCDF</a></li><li><a class="tocitem" href="../tutorial_MohoTopo/">3 - Visualize Moho topography</a></li><li><a class="tocitem" href="../tutorial_GMT_Topography/">4 - Create GMT-based topography</a></li><li><a class="tocitem" href="../tutorial_Coastlines/">5 - Coastlines</a></li><li><a class="tocitem" href="../tutorial_Screenshot_To_Paraview/">6 - Import screenshots</a></li><li><a class="tocitem" href="../tutorial_loadirregular3DSeismicData/">7 - Interpolate irregular 3D seismic tomography</a></li><li><a class="tocitem" href="../tutorial_GMT_Topography_GeologicalMap/">8 - ETOPO1 Topography and geological maps</a></li><li><a class="tocitem" href="../tutorial_ISC_data/">9 - ISC earthquake data</a></li><li><a class="tocitem" href="../tutorial_GPS/">10 - Plot GPS vectors</a></li><li><a class="tocitem" href="../tutorial_UTM/">11 - Read UTM data</a></li><li><a class="tocitem" href="../Tutorial_Votemaps/">12 - VoteMaps</a></li><li><a class="tocitem" href="../tutorial_local_Flegrei/">13 - Campi Flegrei</a></li><li><a class="tocitem" href="../LaPalma_example/">14 - Cartesian Volcano Model</a></li><li><a class="tocitem" href="../tutorial_time_Seismicity/">15 - Create movies</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../datastructures/">Data Structures</a></li><li><a class="tocitem" href="../dataimport/">Data Import</a></li><li class="is-active"><a class="tocitem" href>Projection</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#@docs"><span>```@docs</span></a></li><li class="toplevel"><a class="tocitem" href="#GeophysicalModelGenerator.Convert2CartData"><span>GeophysicalModelGenerator.Convert2CartData</span></a></li><li class="toplevel"><a class="tocitem" href="#GeophysicalModelGenerator.ProjectCartData"><span>GeophysicalModelGenerator.ProjectCartData</span></a></li><li class="toplevel"><a class="tocitem" href="#GeophysicalModelGenerator.Convert2UTMzone"><span>GeophysicalModelGenerator.Convert2UTMzone</span></a></li><li class="toplevel"><a class="tocitem" href="#"><span>```</span></a></li></ul></li><li><a class="tocitem" href="../paraview_output/">Paraview output</a></li><li><a class="tocitem" href="../tools/">Tools</a></li><li><a class="tocitem" href="../visualise/">Visualisation</a></li><li><a class="tocitem" href="../gravity_code/">Gravity code</a></li><li><a class="tocitem" href="../lamem/">LaMEM</a></li><li><a class="tocitem" href="../profile_processing/">Profile Processing</a></li></ul></li><li><a class="tocitem" href="../listfunctions/">List of functions</a></li><li><a class="tocitem" href="../authors/">Authors</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li><li><a class="tocitem" href="../code_of_conduct/">Code of Conduct</a></li><li><a class="tocitem" href="../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Projection</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Projection</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaGeodynamics/GeophysicalModelGenerator.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaGeodynamics/GeophysicalModelGenerator.jl/blob/main/docs/src/man/projection.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Projecting-and-converting-data"><a class="docs-heading-anchor" href="#Projecting-and-converting-data">Projecting &amp; converting data</a><a id="Projecting-and-converting-data-1"></a><a class="docs-heading-anchor-permalink" href="#Projecting-and-converting-data" title="Permalink"></a></h1><p>Typically, you load a dataset by reading it into julia and either generating a <code>GeoData</code> structure (in case you have <code>longitude/latitude/depth</code> info), or as <code>UTMData</code> (in case the data is in <code>UTM coordinates</code>, which requires you to specify the zone &amp; hemisphere).</p><p>If you write the data to <code>Paraview</code>, it is internally converted to a Paraview structure (which involves <code>x,y,z</code> Cartesian Earth-Centered-Earth-Fixed (ECEF) coordinates using the <code>wgs84</code> ellipsoid). </p><p>Yet, if you do geodynamic calculations the chances are that the geodynamic code does not operate in spherical coordinates, but rather use cartesian ones. In that case you should transfer your data to the <code>CartData</code> structure, which requires you to specify a <code>ProjectionPoint</code> that is a point on the map that will later have the coordinates <code>(0,0)</code> in the <code>CartData</code> structure.</p><h4 id="1.-Converting"><a class="docs-heading-anchor" href="#1.-Converting">1. Converting</a><a id="1.-Converting-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Converting" title="Permalink"></a></h4><p>Converting from one coordinate system to the other is straightforward. Let&#39;s use Europe as an example:</p><pre><code class="language-julia hljs">julia&gt; using GeophysicalModelGenerator, GMT
julia&gt; Topo = ImportTopo(lon = [-10, 45], lat=[25, 50], file=&quot;@earth_relief_20m&quot;)
GeoData 
  size  : (165, 75, 1)
  lon   ϵ [ -10.0 : 44.666666666666664]
  lat   ϵ [ 25.0 : 49.666666666666664]
  depth ϵ [ -4.9855 km : 3.123 km]
  fields: (:Topography,)
julia&gt; Write_Paraview(Topo,&quot;Topo&quot;)
Saved file: Topo.vts</code></pre><p>The result is shown on the globe as:  <img src="../../assets/img/Topo_Europe_GeoData.png" alt="Topo_Europe_GeoData"/></p><p>You can convert this to UTM zone as:</p><pre><code class="language-julia hljs">julia&gt; convert(UTMData, Topo)
UTMData 
  UTM zone : 29-38 North
    size   : (165, 75, 1)
    EW     ϵ [ 197181.31221507967 : 769155.4572884373]
    NS     ϵ [ 2.7649477474783654e6 : 5.505892073781423e6]
    depth  ϵ [ -4985.5 m : 3123.0 m]
    fields : (:Topography,)</code></pre><p>As the area is large, it covers a range of <code>UTM</code> zones (and every point has a UTM zone attached). Within each zone, the coordinates are approximately orthogonal. Plotting this to Paraview does <em>not</em> result in a sensible dataset.</p><p>Yet, what we could do instead is show all data with respect to a single UTM zone. For this, we have to select a point around which we project (in this case more or less in the center):</p><pre><code class="language-julia hljs">julia&gt; p=ProjectionPoint(Lon=17.3, Lat=37.5)
ProjectionPoint(37.5, 17.3, 703311.4380385976, 4.152826288024972e6, 33, true)</code></pre><p>Projecting the <code>GeoData</code> set using this projection point is done with:</p><pre><code class="language-julia hljs">julia&gt; Convert2UTMzone(Topo,p)
UTMData 
  UTM zone : 33-33 North
    size   : (165, 75, 1)
    EW     ϵ [ -2.0750691599137965e6 : 3.581351293385453e6]
    NS     ϵ [ 2.7649477474783654e6 : 5.938114212160672e6]
    depth  ϵ [ -4985.5 m : 3123.0 m]
    fields : (:Topography,)</code></pre><p>Whereas this is now in UTM Data (in meters), it is distorted.  <img src="../../assets/img/Topo_Europe_UTMData.png" alt="Topo_Europe_UTMData"/></p><p>Often it is more convenient to have this in <code>CartData</code>, which is done in a similar manner:</p><pre><code class="language-julia hljs">julia&gt; Topo_Cart = Convert2CartData(Topo,p)
CartData 
    size   : (165, 75, 1)
    x      ϵ [ -2778.3805979523936 km : 2878.039855346856 km]
    y      ϵ [ -1387.8785405466067 km : 1785.2879241356998 km]
    z      ϵ [ -4.9855 km : 3.123 km]
    fields : (:Topography,)</code></pre><p>This shows that the model is ~5600 by 3000 km. <img src="../../assets/img/Topo_Europe_CartData.png" alt="Topo_Europe_CartData"/></p><p>Whereas this is ok to look at and compare with a LaMEM model setup, we cannot use it to perform internal calculations (or to generate a LaMEM model setup), because the <code>x</code> and <code>y</code> coordinates are distorted and not orthogonal. </p><h4 id="2.-Projecting-data"><a class="docs-heading-anchor" href="#2.-Projecting-data">2. Projecting data</a><a id="2.-Projecting-data-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Projecting-data" title="Permalink"></a></h4><p>For use with LaMEM, you would need an orthogonal cartesian grid. From the last command above we get some idea on the area, so we can create this:</p><pre><code class="language-julia hljs">julia&gt; Topo_Cart_orth  = CartData(XYZGrid(-2000:20:2000,-1000:20:1000,0))
CartData 
    size   : (201, 101, 1)
    x      ϵ [ -2000.0 km : 2000.0 km]
    y      ϵ [ -1000.0 km : 1000.0 km]
    z      ϵ [ 0.0 km : 0.0 km]
    fields : (:Z,)</code></pre><p>Next, we can project the topographic data (in <code>GeoData</code> format) on this orthogonal grid</p><pre><code class="language-julia hljs">julia&gt; Topo_Cart_orth  = ProjectCartData(Topo_Cart_orth, Topo, p)
CartData 
    size   : (201, 101, 1)
    x      ϵ [ -2000.0 km : 2000.0 km]
    y      ϵ [ -1000.0 km : 1000.0 km]
    z      ϵ [ -4.485650671162607 km : 2.5909655318121865 km]
    fields : (:Topography,)
julia&gt; Write_Paraview(Topo_Cart_orth,&quot;Topo_Cart_orth&quot;);    </code></pre><p><img src="../../assets/img/Topo_Europe_CartData_Proj.png" alt="Topo_Europe_CartData_Proj"/> So this interpolates the topographic data from the <code>GeoData</code> to the orthogonal cartesian grid (which can be used with LaMEM, for example).</p><p>You can do similar projections with full 3D data sets or pointwise data. </p><h4 id="3.-List-of-functions"><a class="docs-heading-anchor" href="#3.-List-of-functions">3. List of functions</a><a id="3.-List-of-functions-1"></a><a class="docs-heading-anchor-permalink" href="#3.-List-of-functions" title="Permalink"></a></h4><h1 id="@docs"><a class="docs-heading-anchor" href="#@docs">```@docs</a><a id="@docs-1"></a><a class="docs-heading-anchor-permalink" href="#@docs" title="Permalink"></a></h1><h1 id="GeophysicalModelGenerator.Convert2CartData"><a class="docs-heading-anchor" href="#GeophysicalModelGenerator.Convert2CartData">GeophysicalModelGenerator.Convert2CartData</a><a id="GeophysicalModelGenerator.Convert2CartData-1"></a><a class="docs-heading-anchor-permalink" href="#GeophysicalModelGenerator.Convert2CartData" title="Permalink"></a></h1><h1 id="GeophysicalModelGenerator.ProjectCartData"><a class="docs-heading-anchor" href="#GeophysicalModelGenerator.ProjectCartData">GeophysicalModelGenerator.ProjectCartData</a><a id="GeophysicalModelGenerator.ProjectCartData-1"></a><a class="docs-heading-anchor-permalink" href="#GeophysicalModelGenerator.ProjectCartData" title="Permalink"></a></h1><h1 id="GeophysicalModelGenerator.Convert2UTMzone"><a class="docs-heading-anchor" href="#GeophysicalModelGenerator.Convert2UTMzone">GeophysicalModelGenerator.Convert2UTMzone</a><a id="GeophysicalModelGenerator.Convert2UTMzone-1"></a><a class="docs-heading-anchor-permalink" href="#GeophysicalModelGenerator.Convert2UTMzone" title="Permalink"></a></h1><h1 id><a class="docs-heading-anchor" href="#">```</a><a id="-1"></a><a class="docs-heading-anchor-permalink" href="#" title="Permalink"></a></h1></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dataimport/">« Data Import</a><a class="docs-footer-nextpage" href="../paraview_output/">Paraview output »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 29 February 2024 14:40">Thursday 29 February 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
