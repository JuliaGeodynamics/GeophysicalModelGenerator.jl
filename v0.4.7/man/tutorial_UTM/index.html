<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Read UTM data · GeophysicalModelGenerator.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GeophysicalModelGenerator.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/">Overview</a></li><li><a class="tocitem" href="../tutorial_load3DSeismicData/">3D seismic tomography from ASCII</a></li><li><a class="tocitem" href="../tutorial_loadregular3DSeismicData_netCDF/">3D seismic tomography from netCDF</a></li><li><a class="tocitem" href="../tutorial_MohoTopo/">Visualize Moho topography</a></li><li><a class="tocitem" href="../tutorial_GMT_Topography/">Create GMT-based topography</a></li><li><a class="tocitem" href="../tutorial_Coastlines/">Coastlines</a></li><li><a class="tocitem" href="../tutorial_Screenshot_To_Paraview/">Import screenshots</a></li><li><a class="tocitem" href="../tutorial_loadirregular3DSeismicData/">Interpolate irregular 3D seismic tomography</a></li><li><a class="tocitem" href="../tutorial_GMT_Topography_GeologicalMap/">ETOPO1 Topography and geological maps</a></li><li><a class="tocitem" href="../tutorial_ISC_data/">ISC earthquake data</a></li><li><a class="tocitem" href="../tutorial_GPS/">Plot GPS vectors</a></li><li class="is-active"><a class="tocitem" href>Read UTM data</a><ul class="internal"><li><a class="tocitem" href="#Goal"><span>Goal</span></a></li><li><a class="tocitem" href="#Steps"><span>Steps</span></a></li></ul></li><li><a class="tocitem" href="../Tutorial_Votemaps/">VoteMaps</a></li><li><a class="tocitem" href="../tutorial_local_Flegrei/">Kilometer-scale volcano</a></li><li><a class="tocitem" href="../LaPalma_example/">Generating LaMEM model</a></li><li><a class="tocitem" href="../tutorial_time_Seismicity/">Create movies</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../datastructures/">Data Structures</a></li><li><a class="tocitem" href="../dataimport/">Data Import</a></li><li><a class="tocitem" href="../projection/">Projection</a></li><li><a class="tocitem" href="../paraview_output/">Paraview output</a></li><li><a class="tocitem" href="../tools/">Tools</a></li><li><a class="tocitem" href="../visualise/">Visualisation</a></li><li><a class="tocitem" href="../gravity_code/">Gravity code</a></li><li><a class="tocitem" href="../lamem/">LaMEM</a></li></ul></li><li><a class="tocitem" href="../listfunctions/">List of functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Read UTM data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Read UTM data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGeodynamics/GeophysicalModelGenerator.jl/blob/master/docs/src/man/tutorial_UTM.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Read-in-UTM-data"><a class="docs-heading-anchor" href="#Read-in-UTM-data">Read in UTM data</a><a id="Read-in-UTM-data-1"></a><a class="docs-heading-anchor-permalink" href="#Read-in-UTM-data" title="Permalink"></a></h1><h2 id="Goal"><a class="docs-heading-anchor" href="#Goal">Goal</a><a id="Goal-1"></a><a class="docs-heading-anchor-permalink" href="#Goal" title="Permalink"></a></h2><p>The aim of this tutorial is to show you how you can read in data that is given in UTM coordinates. The example we use is the 3D density model of the Alps derived by Spooner et al. (2010), which you can download following the link from</p><p>Spooner, Cameron; Scheck-Wenderoth, Magdalena; Götze, Hans-Jürgen; Ebbing, Jörg; Hetényi, György (2019): 3D ALPS: 3D Gravity Constrained Model of Density Distribution Across the Alpine Lithosphere. V. 2.0. GFZ Data Services. https://doi.org/10.5880/GFZ.4.5.2019.004</p><h2 id="Steps"><a class="docs-heading-anchor" href="#Steps">Steps</a><a id="Steps-1"></a><a class="docs-heading-anchor-permalink" href="#Steps" title="Permalink"></a></h2><h4 id=".-Download-and-import-UTM-data:"><a class="docs-heading-anchor" href="#.-Download-and-import-UTM-data:">1. Download and import UTM data:</a><a id=".-Download-and-import-UTM-data:-1"></a><a class="docs-heading-anchor-permalink" href="#.-Download-and-import-UTM-data:" title="Permalink"></a></h4><p>Download the data file <code>2019-004_Spooner_Lithospheric Mantle.txt</code> from <a href="man/">http://doi.org/10.5880/GFZ.4.5.2019.004</a> and make sure that you change to the directory using julia. If you open the data with a text editor, you&#39;ll see that it looks like:</p><pre><code class="language-none"># These data are freely available under the Creative Commons Attribution 4.0 International Licence (CC BY 4.0)					
# when using the data please cite as: 					
# Spooner, Cameron; Scheck-Wenderoth, Magdalena; Götze, Hans-Jürgen; Ebbing, Jörg; Hetényi, György (2019): 3D Gravity Constrained Model of Density Distribution Across the Alpine Lithosphere. GFZ Data Services. http://doi.org/10.5880/GFZ.4.5.2019.004
X COORD (UTM Zone 32N)	Y COORD (UTM Zone 32N)	TOP (m.a.s.l)	THICKNESS (m)	DENSITY (Kg/m3)
286635	4898615	-24823.2533	70418.125	3305
286635	4918615	-25443.48901	69410.01563	3305
286635	4938615	-28025.24511	66402.49219	3305
286635	4958615	-32278.13135	61663.48438	3305
286635	4978615	-35885.5625	57459.14063	3305
286635	4998615	-37270.9812	55318.71094	3305
286635	5018615	-36134.30481	55497.16406	3305
286635	5038615	-34866.0697	55555.41406	3305</code></pre><p>So we have 5 columns with data values, and the data is separated by spaces. We can load that in julia as:</p><pre><code class="language-julia">julia&gt; using DelimitedFiles, GeophysicalModelGenerator
julia&gt; data=readdlm(&quot;2019-004_Spooner_Lithospheric Mantle.txt&quot;,skipstart=4)
1023×5 Matrix{Float64}:
 286635.0  4.89862e6  -24823.3  70418.1  3305.0
 286635.0  4.91862e6  -25443.5  69410.0  3305.0
 286635.0  4.93862e6  -28025.2  66402.5  3305.0
 286635.0  4.95862e6  -32278.1  61663.5  3305.0
      ⋮                                  
 926635.0  5.45862e6  -35302.7  83215.6  3335.0
 926635.0  5.47862e6  -34908.6  84203.0  3335.0
 926635.0  5.49862e6  -34652.4  85398.3  3335.0</code></pre><p>We can read the numerical data from the file with:</p><pre><code class="language-julia">julia&gt; ew, ns, depth, thick, rho  =   data[:,1], data[:,2], data[:,3], data[:,4], data[:,5];</code></pre><h4 id=".-Check-and-reshape-vertical-velocity"><a class="docs-heading-anchor" href="#.-Check-and-reshape-vertical-velocity">2. Check &amp; reshape vertical velocity</a><a id=".-Check-and-reshape-vertical-velocity-1"></a><a class="docs-heading-anchor-permalink" href="#.-Check-and-reshape-vertical-velocity" title="Permalink"></a></h4><p>The data is initially available as 1D columns, which needs to be reshaped into 2D arrays.  We first reshape it into 2D arrays (using <code>reshape</code>). Yet, if we later want to visualize a perturbed surface in paraview, we need to save this as a 3D array (with 1 as 3rd dimension).</p><pre><code class="language-julia">julia&gt; res = ( length(unique(ns)), length(unique(ew)), 1)
julia&gt; EW  =  reshape(ew,res) 
julia&gt; NS  =  reshape(ns,res)
julia&gt; Depth =  reshape(depth,res)
julia&gt; T     =  reshape(thick,res)
julia&gt; Rho   =  reshape(rho,res)</code></pre><p>Next we can examine <code>EW</code>: </p><pre><code class="language-julia">julia&gt; EW
31×33×1 Array{Float64, 3}:
[:, :, 1] =
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0  …  826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
      ⋮                                                 ⋮              ⋱                                     ⋮              
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0     826635.0  846635.0  866635.0  886635.0  906635.0  926635.0
 286635.0  306635.0  326635.0  346635.0  366635.0  386635.0  406635.0  …  826635.0  846635.0  866635.0  886635.0  906635.0  926635.0</code></pre><p>So, on fact, the EW array varies in the 2nd dimension. It should, however, vary in the first dimension which is why we need to apply a permutation &amp; switch the first and second dimensions:</p><pre><code class="language-julia">julia&gt; EW  =  permutedims(EW,[2 1 3]) 
julia&gt; NS  =  permutedims(NS,[2 1 3]) 
julia&gt; Depth =  permutedims(Depth,[2 1 3]) 
julia&gt; T     =  permutedims(T,[2 1 3]) 
julia&gt; Rho   =  permutedims(Rho,[2 1 3]) </code></pre><h4 id=".-Create-UTMData-structure"><a class="docs-heading-anchor" href="#.-Create-UTMData-structure">3. Create UTMData structure</a><a id=".-Create-UTMData-structure-1"></a><a class="docs-heading-anchor-permalink" href="#.-Create-UTMData-structure" title="Permalink"></a></h4><p>Next we can add the data to the <code>UTMData</code> structure. In this, we use the information that the UTM zone was <code>32 North</code>.</p><pre><code class="language-julia">julia&gt; Data_LM = UTMData(EW,NS,Depth,32, true, (Thickness=T/1e3*km, Density=Rho*kg/m^3 ))
UTMData 
  UTM zone : 32-32 North
    size   : (33, 31, 1)
    EW     ϵ [ 286635.0 : 926635.0]
    NS     ϵ [ 4.898615e6 : 5.498615e6]
    depth  ϵ [ -52579.56788 m : -20873.400850000003 m]
    fields : (:Thickness, :Density)</code></pre><h4 id=".-Saving-and-plotting-in-Paraview"><a class="docs-heading-anchor" href="#.-Saving-and-plotting-in-Paraview">4. Saving and plotting in Paraview</a><a id=".-Saving-and-plotting-in-Paraview-1"></a><a class="docs-heading-anchor-permalink" href="#.-Saving-and-plotting-in-Paraview" title="Permalink"></a></h4><p>We can transfer this into a GeoData structure as:</p><pre><code class="language-julia">julia&gt; Data_LM_lonlat = convert(GeoData,Data_LM)
GeoData 
  size  : (33, 31, 1)
  lon   ϵ [ 6.046903388679526 : 14.892535147436673]
  lat   ϵ [ 44.11618022783332 : 49.64004892531006]
  depth ϵ [ -52.57956788 km : -20.873400850000003 km]
  fields: (:Thickness, :Density)</code></pre><p>and save it to Paraview in the usual way</p><pre><code class="language-julia">julia&gt; Write_Paraview(Data_LM_lonlat, &quot;Data_LM_lonlat&quot;)</code></pre><p>Opening and plotting the vertical field gives: <img src="../../assets/img/Tutorial_UTM.png" alt="Tutorial_UTM"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial_GPS/">« Plot GPS vectors</a><a class="docs-footer-nextpage" href="../Tutorial_Votemaps/">VoteMaps »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 16 December 2022 16:30">Friday 16 December 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
